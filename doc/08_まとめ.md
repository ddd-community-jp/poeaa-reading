# 第8章 まとめ

## ドメインからの開始

#### 感想・気づき

- In this argument we see that the tools you have also affect your architecture. Sometimes you’re able to choose the tools based on the architecture, and in theory that’s the way you should go.
    - Table Module以外に、アーキテクチャーと技術(フレームワーク)が密結合になっているパターンってありましたっけ？

#### 疑問

- One of the biggest frustrations in being a pundit is that people often come up to me at a conference or send an e-mail message asking for advice on their architectural or process decisions. There’s no way you can give particular advice on the basis of a five-minute description. I write this chapter with even less knowledge of your predicament.
	- 自分達の課題を正しく捉えるには、どうすればいいのだろう？


## データソースに進む

#### 感想・気づき


#### 疑問
- > 最もシンプルなトランザクションスクリプトであっても独自のデータベースロジックが含まれている
    - 「であっても」ってどこからきたのだろう
    - > The simplest Transaction Scripts (110) contain their own database logic
    - 「であっても」が読む上でノイズというか、ミスリードにすらなっていそうな。直訳っぽく「最もシンプルなトランザクションスクリプトは、自身のデータベースロジックを含む」で良かったのじゃないかしら
    - それであれば、次の「私はそれを避ける」ともつながる気がする
        - トランザクションスクリプト自体は否定しないが、トランザクションスクリプトにデータベースロジックをも含めることはしない、的な
    - 「であっても」のせいで、トランザクションスクリプトをそもそも完全に避けようとしているかのように読めてしまうような

### トランザクションスクリプト用のデータソース

#### 感想・気づき

- アプリケーションとデータベースの境界線は明確にすべきと言っているのにどうしてみんなは分けようとしないのかな?
    - >しかし、どんなシンプルなものであっても、私はこれを避ける
    - DBで苦しめられているのはわかるけど、自分で自分の首を閉めていないのかな?
    - 二章でも、そんなに悪し様に書いてなかったと思うんですよね、トランザクションスクリプトのこと
    - ある程度の複雑さには耐えられない、とは明言しているものの
    - The simplest Transaction Scripts だと含む場合すらある、でも Fowler はそれ（ = The simplest）は採用しない、データベースロジックは分離する（その上で simplest ではない Transaction Scripts 自体は採用し得る）、という意図だったんじゃないかなー、という理解です
    - トランザクションスクリプトであっても、DBとの直接やりとりは分離したいし、Fowlerはそうするつもりだよ、という意図なのかなと（日本語版だと、「であっても」のせいでそう読みにくい印象）
    - トランザクションスクリプト自体やめようというお話だとすると、その後で行データゲートウェイとテーブルデータゲートウェイの説明に入る意図がよくわからないなあと（少なくとも、Fowlerはトランザクションスクリプトを好ましいとは思っていないのは確実だと思いつつ）
    - Fowler 的には、トランザクションスクリプトとオブジェクトモデルは相容れないものとして捉えてそうなのは確かに
    - あるある（ したした してる） > トランザクションスクリプトからドメインモデル
    - 作り捨てで十分とか、あるいは一度作ったらその後変化の余地が無いものであれば、トランザクションスクリプトで十分というのは有りそうだなーというイメージはある
    - （そういうつもりて作られたものに限って、やたら生き延びてたり、夜に憚ったりするのだけど）

#### 疑問


### データソース「テーブルモジュール」

#### 感想・気づき

#### 疑問

### ドメインモデル用のデータソース

1. データベースに接続するクラスが20〜30程度のシンプルなモデル
	- アクティブレコードを選択する
	- 分離をより明確にしたいときにはテーブルゲートウェイか行データゲートウェイを選択する
1. 複雑なドメインモデル
	- データマッパーを実装する
		- ドメインモデルを他のレイヤに依存しないようにする
	- マッピングツールを使用する
		- データマッパーの実装が複雑な場合に採用する

#### 感想・気づき

- データベースとアプリケーションの分離の方法について具体的な方針を出しているんだな

#### 疑問

- データベースに **隣接する** 20~30 のクラス、というのがちょっと気になりますね
    - データベースに隣接 **しない** クラスが20~30だったらどう書いてたのかな、みたいな
- データベースに  **隣接する** とは?
    - つながってるんじゃなくて、あくまで近いだけっぽいなーという
    - 「近い」の意味の close だと思います
    - 日本語版だけ見た時、データベースそのものと接続しなくとも、データベースとのやり取り関連（レコードとオブジェクトの変換とか、データベース通信のI/FやFacade役とか）のクラス（＝DBと隣接したクラス）が大半を占めるなら、ActiveRecordでおk、みたいな意味なのかなーと思った感じです
    - イメージ程度に受け取ってました > 20~30
    - もう少し数が増えたり、データベースに隣接しない（＝データベースの知識や都合を全く知らない、知りたくない）クラスの割合がどんどん増えてきた時に、「もう少し複雑に?」の話になってくるのかなー、という印象です（印象)
    - データベース接続そのものでなくとも、データベースにまつわる何某かを扱う、というのを「隣接（pretty close）」と表現してるのかしら、という印象（印象以上は、ちょっと原文読み込む必要ありそう）

## プレゼンテーションレイヤー

#### 感想・気づき

#### 疑問

## 技術上のアドバイス

#### 感想・気づき

#### 疑問

### JavaとJ2EE

#### 感想・気づき

#### 疑問

### .NET

#### 感想・気づき

#### 疑問

### ストアドプロシージャ

#### 感想・気づき

#### 疑問

### Webサービス

#### 感想・気づき

#### 疑問

## その他のレイヤ化スキーム

#### 感想・気づき

#### 疑問

###### tags: `PoEAA`